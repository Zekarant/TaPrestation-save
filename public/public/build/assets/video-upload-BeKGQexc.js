document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("drop-area"),o=document.getElementById("video"),s=document.getElementById("file-name"),i=document.getElementById("submit-btn");n&&(n.addEventListener("click",e=>{e.stopPropagation(),o.click()}),n.addEventListener("dragover",e=>{e.preventDefault(),n.style.borderColor="#5a67d8"}),n.addEventListener("dragleave",()=>{n.style.borderColor="#dee2e6"}),n.addEventListener("drop",e=>{e.preventDefault(),n.style.borderColor="#dee2e6";const d=e.dataTransfer.files;d.length>0&&(o.files=d,a({target:{files:d}}))})),o&&o.addEventListener("change",a);function a(e){const d=e.target.files[0],t=document.getElementById("video-preview");if(d){s.textContent=d.name;const l=URL.createObjectURL(d);t.src=l,t.style.display="block",t.onloadedmetadata=function(){t.duration>60?(alert("La vidéo ne doit pas dépasser 60 secondes."),o.value="",t.style.display="none",s.textContent="",i.disabled=!0):i.disabled=!1}}else i.disabled=!0}const r=document.querySelector("form");r&&r.addEventListener("submit",function(e){if(!(o.files.length>0)){alert("Veuillez sélectionner une vidéo à importer."),e.preventDefault();return}const t=e.submitter;t&&(t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Envoi en cours...')})});
